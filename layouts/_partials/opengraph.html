<meta property="og:title" content="{{ .Title }}" />
{{- with or .Description .Summary site.Params.description | plainify | htmlUnescape }}
<meta property="og:description" content="{{ trim . " \n\r\t " }}">
{{- end }}
<meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}" />
<meta property="og:url" content="{{ .Permalink }}" />
{{- if .IsPage -}}
{{ $base := resources.Get "images/og.png" }}
{{ $boldFont := resources.Get "fonts/Rubik-Black.ttf"}}
{{ $regularFont := resources.Get "fonts/Rubik-Regular.ttf"}}
{{ $img := $base.Filter (images.Text .Title (dict
"color" "#cba6f7"
"size" 105
"linespacing" 2
"x" 500
"aligny" "center"
"font" $boldFont
"y" (mul $base.Height 0.5 | int)
))}}
{{ $img = resources.Copy (path.Join .Page.RelPermalink "og.png") $img }}
<meta property="og:image" content="{{$img.Permalink}}">
<meta property="og:image:width" content="{{$img.Width}}" />
<meta property="og:image:height" content="{{$img.Height}}" />

<!-- Twitter metadata (used by other websites as well) -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="{{ .Title }}" />
<meta name="twitter:description"
    content="{{ with .Description }}{{ . }}{{ else }}{{if .IsPage}}{{ .Summary }}{{ else }}{{ with .Site.Params.description }}{{ . }}{{ end }}{{ end }}{{ end -}}" />
<meta name="twitter:image" content="{{$img.Permalink}}" />
{{ end }}